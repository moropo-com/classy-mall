import React, { Component } from "react";
import {
  ART,
  View,
  StyleSheet,
  Dimensions,
  PanResponder,
  Animated
} from "react-native";

import blackButtonTheme from "../themes/blackButtonTheme";
const { Group, Shape, Surface } = ART;

var AnimatedGroup = Animated.createAnimatedComponent(Group);

import { Button } from "react-native-paper";
const { width, height } = Dimensions.get("window");

export class MapView extends Component {
  constructor(props) {
    super(props);
    this.state = {
      progress: 0,
      scaleX: 2.5,
      scaleY: 2.5,
      pan: new Animated.ValueXY()
    };
    this.state.panResponder = PanResponder.create({
      onPanResponderRelease: () => {
        this.state.pan.setOffset({
          x: this.currentPanValue.x,
          y: this.currentPanValue.y
        });
        this.state.pan.setValue({ x: 0, y: 0 });
      },
      onStartShouldSetPanResponder: () => true,
      onPanResponderMove: Animated.event([
        null,
        {
          dx: this.state.pan.x, // x,y are Animated.Value
          dy: this.state.pan.y
        }
      ])
    });
  }

  componentDidMount() {
    this.currentPanValue = { x: 0, y: 0 };
    this.panListener = this.state.pan.addListener(
      value => (this.currentPanValue = value)
    );
  }

  componentWillUnmount() {
    this.state.pan.removeListener(this.panListener);
  }

  navigateToShopList() {
    console.log("navigating to shoplist");
    this.props.navigation.navigate("ShopList");
  }

  render() {
    return (
      <View
        style={{ flex: 1 }}
        onPress={() => {
          this.navigateToShopList();
        }}
      >
        <View style={{ flex: 1 }} {...this.state.panResponder.panHandlers}>
          <Surface height={height} width={width}>
            <AnimatedGroup
              ref={component => {
                this.mapgroup = component;
              }}
              scaleX={this.state.scaleX}
              scaleY={this.state.scaleY}
              x={this.state.pan.x}
              y={this.state.pan.y}
            >
              <Group x={-12.5} y={-20.2} scaleX={0.945} scaleY={0.997}>
                <Shape
                  d="M 102,263 C 101,262 99.8,261 98.9,261 98,260 97.1,260 97,260 96.8,260 96.2,260 93.4,258 90.6,256 90.1,256 91.1,255 91.4,254 91,254 89.5,253 87.1,251 87,251 86.2,252 85.7,252 85.2,252 82.1,250 80.2,249 78.5,248 78.3,248 78.1,248 78,248 78.1,248 78.2,248 75.6,245 72.4,243 62.6,236 63.5,237 63.3,234 L 63.2,231 H 60.1 56.9 V 223 216 H 59.5 C 61.1,216 62,216 62,215 62.1,215 62.2,215 62.4,214 62.5,213 62.4,213 61.9,212 61.2,212 61.2,211 61.8,211 62.3,211 62.5,211 62.5,211 62.5,210 62.8,210 63.2,210 64.4,210 64,207 62.4,205 61.1,203 61,203 59.1,203 H 57.2 L 57.5,199 57.8,195 H 54.8 C 52.4,195 51.8,195 51.8,194 51.8,194 51.4,194 50.7,194 49.9,194 49.6,194 49.6,193 49.6,192 50.1,191 50.7,191 51.1,191 51.3,190 51.5,185 51.7,182 52,179 52.2,178 52.5,178 52.6,175 52.6,170 52.6,163 52.6,162 51.9,162 51.5,162 50.8,163 50.5,163 49.9,164 49.6,164 46.1,164 42.5,163 42.3,163 42.4,164 42.5,164 42.3,164 41.2,164 40.5,164 39.7,165 39.4,165 39.1,165 38.9,165 38.9,164 38.9,164 38.4,164 37.8,164 36.7,164 36.7,164 36.7,160 36.7,157 36.8,156 37.6,156 39,156 38.6,156 36.7,155 35.8,155 34.9,155 34.7,154 34.6,154 34.6,152 34.8,150 L 35.1,146 37,145 C 39.1,144 39.1,144 37.3,144 L 36.2,143 36.3,139 C 36.3,137 36.4,135 36.5,135 36.8,134 49.9,134 50.3,135 50.6,135 51.4,135 52.2,135 L 53.5,134 53.6,127 C 53.7,123 53.7,118 53.8,117 53.8,116 53.9,113 53.9,110 V 104 H 59.7 65.6 V 98.7 C 65.6,94.1 65.4,93.2 64.9,93.1 64.5,92.9 64.3,92.5 64.3,91.6 64.3,90.7 64,90.2 63.2,89.7 62.4,89.1 62.3,89 62.7,88.5 63,88.2 63.5,88 63.8,88 64,88 64.3,87.6 64.3,87.2 64.3,86.8 64,86.5 63.7,86.5 63.4,86.5 62.8,86.2 62.3,85.9 61.6,85.3 61.6,85.3 62.3,85.3 62.7,85.3 63.2,85 63.3,84.6 63.4,84.3 63.8,84 64.1,84 64.5,84 64.7,83.6 64.7,82.7 64.7,81.9 64.9,81.3 65.1,81.3 65.3,81.3 65.6,80.3 65.6,79.1 L 65.8,76.9 67.3,76.8 68.9,76.7 70.5,72.8 C 71.3,70.7 72.3,68.4 72.7,67.6 73.7,65.5 73.5,65.1 70.7,63.2 68,61.4 67.1,60.5 67.5,60 67.6,59.9 67.4,59.6 67.1,59.4 66.7,59.2 66.4,58.7 66.4,58.2 66.4,57.2 68.7,55.5 70,55.5 70.5,55.5 71.5,55.1 72.1,54.6 L 73.3,53.8 70.1,51.5 66.8,49.2 V 46.5 43.7 L 75,38 C 79.5,34.8 83.3,32.1 83.4,32.1 83.4,32.1 84.8,32.9 86.3,34 L 89.1,36.1 92,33.9 C 93.7,32.8 95.9,31.3 96.9,30.7 L 98.7,29.5 102,31.6 105,33.7 109,30.3 114,26.9 H 117 C 118,26.9 119,27 119,27.2 119,27.4 121,29.1 124,30.9 L 129,34.3 V 35.8 C 129,37.2 129,37.4 125,39.9 123,41.3 121,42.5 122,42.7 122,42.8 124,44.3 126,46 L 130,49.2 122,54.7 115,60.2 118,62.9 C 122,65.6 122,65.6 121,66.4 121,67.3 121,68 122,68.9 123,69.5 125,69.6 126,69.1 126,68.9 128,69.8 131,72.2 L 135,75.5 H 144 C 149,75.5 153,75.5 154,75.6 154,75.9 155,77.6 155,78 155,78.2 156,78.5 156,78.7 157,79.9 158,80.2 158,81 158,81.4 158,89.6 157,99.2 V 117 H 158 C 159,116 159,116 159,118 159,119 159,119 158,120 156,120 155,121 155,122 155,123 156,124 158,125 159,125 159,125 159,126 159,127 159,127 159,127 158,127 158,127 158,128 158,128 158,128 158,128 157,128 157,128 157,129 V 131 H 155 C 153,131 152,131 152,131 152,131 152,137 152,144 L 151,157 H 150 148 V 161 164 H 146 144 V 166 168 H 149 C 154,168 155,168 155,169 155,169 155,169 156,169 156,169 157,169 157,170 157,171 157,171 158,171 160,172 159,173 156,174 154,174 153,178 155,178 158,179 158,179 158,181 158,182 158,182 158,181 157,181 157,181 157,181 157,182 157,182 157,182 156,182 156,184 156,186 V 190 H 152 147 V 193 L 148,195 H 156 165 V 209 223 H 163 C 161,223 161,223 161,223 161,222 160,222 156,222 152,222 151,222 151,222 151,223 149,223 141,223 H 131 V 224 C 131,225 131,226 128,227 L 125,229 H 123 C 122,228 121,228 120,229 118,229 118,230 119,232 119,233 119,235 119,235 118,235 118,236 118,238 118,240 118,240 117,240 117,240 117,240 117,241 117,241 119,242 121,244 L 125,247 124,248 C 122,249 122,250 122,250 123,250 123,251 123,251 122,251 123,251 123,252 123,252 123,252 123,252 122,252 121,252 118,254 117,255 115,256 115,256 115,256 114,256 113,255 H 112 L 108,258 103,261 104,262 C 105,262 105,262 104,263 104,263 104,263 102,263 Z"
                  stroke="black"
                  strokeWidth={1}
                  onPress={() => {
                    console.log("press");
                    this.setState({
                      scaleX: this.state.scaleX + 0.5,
                      scaleY: this.state.scaleY + 0.5
                    });
                  }}
                />
              </Group>
              <Group x={20} y={-54.5}>
                <Shape
                  d="M 46.9,66.3 51.9,70.3 60.9,63.7 66.9,67.9 74.9,61 79.9,60.8 89.9,68.5 V 71.1 L 82.9,76.9 90.9,83.3 52.9,110 30.9,94.2 32.9,89.7 33.9,90.2 36.9,88.1 30.9,83.3 V 77.7 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 37.9,98.7 32.9,111 H 29.8 L 27.7,121 29.5,138 H 48.9 L 47.9,133 H 54.9 L 55.9,126 H 49.9 L 48.9,113 52.9,110 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 113,110 H 93.9 L 92.9,114 87.9,117 79.9,118 78.9,125 80.9,129 91.9,128 V 133 L 102,134 V 137 H 107 L 106,141 H 112 L 111,137 H 116 L 117,115 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 18.7,148 28.2,149 28,172 H 29.9 L 30.9,176 27.7,177 21.3,172 21.9,162 H 18.4 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 111,176 H 89.9 L 84.9,180 H 78.9 L 79.9,187 H 85.9 L 89.9,191 H 110 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 42.9,179 H 30.9 28.2 L 26.1,182 26.4,186 28,188 H 42.9 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 101,226 99.9,231 H 89.9 L 88.9,236 85.9,238 V 242 H 78.9 V 249 H 85.9 V 253 L 88.9,254 V 257 H 124 L 123,255 124,229 H 107 V 227 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 84.9,282 51.9,256 29.5,272 44.9,284 48.9,285 53.9,289 55.9,292 60.9,295 65.9,297 64.9,295 72.9,289 76.9,290 83.9,285 82.9,284 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 29.5,272 51.9,256 47.9,253 V 231 H 27.7 L 25,238 27.7,241 26.6,245 26.4,249 27.7,251 27.4,265 V 271 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 17.1,212 H 41.9 V 215 H 46.9 V 217 H 48.9 L 50.9,220 51.9,221 45.9,222 44.9,228 H 35.9 V 226 H 16 Z"
                  stroke="black"
                  strokeWidth={1}
                />
                <Shape
                  d="M 54.9,206 V 209 L 58.9,212 V 216 L 55.9,218 H 63.9 L 62.9,224 H 68.9 V 222 H 78.9 L 79.9,219 76.9,217 V 212 L 79.9,211 H 64.9 V 207 Z"
                  stroke="black"
                  strokeWidth={1}
                />
              </Group>
            </AnimatedGroup>
          </Surface>
        </View>
        <View style={{ flexDirection: "row" }}>
          <Button
            color="black"
            mode="contained"
            style={{ flex: 1, borderRadius: 0 }}
            onPress={() => {
              this.setState({
                scaleX: this.state.scaleX - 0.5,
                scaleY: this.state.scaleY - 0.5
              });
            }}
          >
            Zoom out
          </Button>
          <Button
            color="black"
            mode="contained"
            style={{ flex: 1, borderRadius: 0 }}
            onPress={() => {
              this.setState({
                scaleX: this.state.scaleX + 0.5,
                scaleY: this.state.scaleY + 0.5
              });
            }}
          >
            Zoom in
          </Button>
          <Button
            color="black"
            mode="contained"
            style={{ flex: 1, borderRadius: 0 }}
            onPress={() => {
              this.navigateToShopList();
            }}
          >
            Shop List
          </Button>
        </View>
      </View>
    );
  }
}

//  <View style={{flex: 1}}
// {...this.state.panResponder.panHandlers}>
//           <AnimatedSvg height={height} width={width}  style={{transform: [{scale: this.state.scaleX}, {translateX:this.state.pan.x}, {translateY:this.state.pan.y}],position: 'absolute' }}>
//               <G x={-32.5} y={34.2} scaleX={0.945}
//               scaleY={0.997} >
//                   <Path
//                    d="M 102,263 C 101,262 99.8,261 98.9,261 98,260 97.1,260 97,260 96.8,260 96.2,260 93.4,258 90.6,256 90.1,256 91.1,255 91.4,254 91,254 89.5,253 87.1,251 87,251 86.2,252 85.7,252 85.2,252 82.1,250 80.2,249 78.5,248 78.3,248 78.1,248 78,248 78.1,248 78.2,248 75.6,245 72.4,243 62.6,236 63.5,237 63.3,234 L 63.2,231 H 60.1 56.9 V 223 216 H 59.5 C 61.1,216 62,216 62,215 62.1,215 62.2,215 62.4,214 62.5,213 62.4,213 61.9,212 61.2,212 61.2,211 61.8,211 62.3,211 62.5,211 62.5,211 62.5,210 62.8,210 63.2,210 64.4,210 64,207 62.4,205 61.1,203 61,203 59.1,203 H 57.2 L 57.5,199 57.8,195 H 54.8 C 52.4,195 51.8,195 51.8,194 51.8,194 51.4,194 50.7,194 49.9,194 49.6,194 49.6,193 49.6,192 50.1,191 50.7,191 51.1,191 51.3,190 51.5,185 51.7,182 52,179 52.2,178 52.5,178 52.6,175 52.6,170 52.6,163 52.6,162 51.9,162 51.5,162 50.8,163 50.5,163 49.9,164 49.6,164 46.1,164 42.5,163 42.3,163 42.4,164 42.5,164 42.3,164 41.2,164 40.5,164 39.7,165 39.4,165 39.1,165 38.9,165 38.9,164 38.9,164 38.4,164 37.8,164 36.7,164 36.7,164 36.7,160 36.7,157 36.8,156 37.6,156 39,156 38.6,156 36.7,155 35.8,155 34.9,155 34.7,154 34.6,154 34.6,152 34.8,150 L 35.1,146 37,145 C 39.1,144 39.1,144 37.3,144 L 36.2,143 36.3,139 C 36.3,137 36.4,135 36.5,135 36.8,134 49.9,134 50.3,135 50.6,135 51.4,135 52.2,135 L 53.5,134 53.6,127 C 53.7,123 53.7,118 53.8,117 53.8,116 53.9,113 53.9,110 V 104 H 59.7 65.6 V 98.7 C 65.6,94.1 65.4,93.2 64.9,93.1 64.5,92.9 64.3,92.5 64.3,91.6 64.3,90.7 64,90.2 63.2,89.7 62.4,89.1 62.3,89 62.7,88.5 63,88.2 63.5,88 63.8,88 64,88 64.3,87.6 64.3,87.2 64.3,86.8 64,86.5 63.7,86.5 63.4,86.5 62.8,86.2 62.3,85.9 61.6,85.3 61.6,85.3 62.3,85.3 62.7,85.3 63.2,85 63.3,84.6 63.4,84.3 63.8,84 64.1,84 64.5,84 64.7,83.6 64.7,82.7 64.7,81.9 64.9,81.3 65.1,81.3 65.3,81.3 65.6,80.3 65.6,79.1 L 65.8,76.9 67.3,76.8 68.9,76.7 70.5,72.8 C 71.3,70.7 72.3,68.4 72.7,67.6 73.7,65.5 73.5,65.1 70.7,63.2 68,61.4 67.1,60.5 67.5,60 67.6,59.9 67.4,59.6 67.1,59.4 66.7,59.2 66.4,58.7 66.4,58.2 66.4,57.2 68.7,55.5 70,55.5 70.5,55.5 71.5,55.1 72.1,54.6 L 73.3,53.8 70.1,51.5 66.8,49.2 V 46.5 43.7 L 75,38 C 79.5,34.8 83.3,32.1 83.4,32.1 83.4,32.1 84.8,32.9 86.3,34 L 89.1,36.1 92,33.9 C 93.7,32.8 95.9,31.3 96.9,30.7 L 98.7,29.5 102,31.6 105,33.7 109,30.3 114,26.9 H 117 C 118,26.9 119,27 119,27.2 119,27.4 121,29.1 124,30.9 L 129,34.3 V 35.8 C 129,37.2 129,37.4 125,39.9 123,41.3 121,42.5 122,42.7 122,42.8 124,44.3 126,46 L 130,49.2 122,54.7 115,60.2 118,62.9 C 122,65.6 122,65.6 121,66.4 121,67.3 121,68 122,68.9 123,69.5 125,69.6 126,69.1 126,68.9 128,69.8 131,72.2 L 135,75.5 H 144 C 149,75.5 153,75.5 154,75.6 154,75.9 155,77.6 155,78 155,78.2 156,78.5 156,78.7 157,79.9 158,80.2 158,81 158,81.4 158,89.6 157,99.2 V 117 H 158 C 159,116 159,116 159,118 159,119 159,119 158,120 156,120 155,121 155,122 155,123 156,124 158,125 159,125 159,125 159,126 159,127 159,127 159,127 158,127 158,127 158,128 158,128 158,128 158,128 157,128 157,128 157,129 V 131 H 155 C 153,131 152,131 152,131 152,131 152,137 152,144 L 151,157 H 150 148 V 161 164 H 146 144 V 166 168 H 149 C 154,168 155,168 155,169 155,169 155,169 156,169 156,169 157,169 157,170 157,171 157,171 158,171 160,172 159,173 156,174 154,174 153,178 155,178 158,179 158,179 158,181 158,182 158,182 158,181 157,181 157,181 157,181 157,182 157,182 157,182 156,182 156,184 156,186 V 190 H 152 147 V 193 L 148,195 H 156 165 V 209 223 H 163 C 161,223 161,223 161,223 161,222 160,222 156,222 152,222 151,222 151,222 151,223 149,223 141,223 H 131 V 224 C 131,225 131,226 128,227 L 125,229 H 123 C 122,228 121,228 120,229 118,229 118,230 119,232 119,233 119,235 119,235 118,235 118,236 118,238 118,240 118,240 117,240 117,240 117,240 117,241 117,241 119,242 121,244 L 125,247 124,248 C 122,249 122,250 122,250 123,250 123,251 123,251 122,251 123,251 123,252 123,252 123,252 123,252 122,252 121,252 118,254 117,255 115,256 115,256 115,256 114,256 113,255 H 112 L 108,258 103,261 104,262 C 105,262 105,262 104,263 104,263 104,263 102,263 Z"
//                    stroke='black'
//                    fill="none"
//                    strokeWidth={1}
//                    onPress={()=>{this.setState({scaleX: this.state.scaleX+0.5, scaleY: this.state.scaleY+0.5})}}/>
//               </G>
//               <G>
//                   <Path
//                      d="M 46.9,66.3 51.9,70.3 60.9,63.7 66.9,67.9 74.9,61 79.9,60.8 89.9,68.5 V 71.1 L 82.9,76.9 90.9,83.3 52.9,110 30.9,94.2 32.9,89.7 33.9,90.2 36.9,88.1 30.9,83.3 V 77.7 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//                   <Path
//                      d="M 37.9,98.7 32.9,111 H 29.8 L 27.7,121 29.5,138 H 48.9 L 47.9,133 H 54.9 L 55.9,126 H 49.9 L 48.9,113 52.9,110 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//                   <Path
//                      d="M 113,110 H 93.9 L 92.9,114 87.9,117 79.9,118 78.9,125 80.9,129 91.9,128 V 133 L 102,134 V 137 H 107 L 106,141 H 112 L 111,137 H 116 L 117,115 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1} />
//                   <Path
//                      d="M 18.7,148 28.2,149 28,172 H 29.9 L 30.9,176 27.7,177 21.3,172 21.9,162 H 18.4 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//                   <Path
//                      d="M 111,176 H 89.9 L 84.9,180 H 78.9 L 79.9,187 H 85.9 L 89.9,191 H 110 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//                   <Path
//                      d="M 42.9,179 H 30.9 28.2 L 26.1,182 26.4,186 28,188 H 42.9 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//                   <Path
//                      d="M 101,226 99.9,231 H 89.9 L 88.9,236 85.9,238 V 242 H 78.9 V 249 H 85.9 V 253 L 88.9,254 V 257 H 124 L 123,255 124,229 H 107 V 227 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1} />
//                   <Path
//                      d="M 84.9,282 51.9,256 29.5,272 44.9,284 48.9,285 53.9,289 55.9,292 60.9,295 65.9,297 64.9,295 72.9,289 76.9,290 83.9,285 82.9,284 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1} />
//                   <Path
//                      d="M 29.5,272 51.9,256 47.9,253 V 231 H 27.7 L 25,238 27.7,241 26.6,245 26.4,249 27.7,251 27.4,265 V 271 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1} />
//                   <Path
//                      d="M 17.1,212 H 41.9 V 215 H 46.9 V 217 H 48.9 L 50.9,220 51.9,221 45.9,222 44.9,228 H 35.9 V 226 H 16 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//                   <Path
//                      d="M 54.9,206 V 209 L 58.9,212 V 216 L 55.9,218 H 63.9 L 62.9,224 H 68.9 V 222 H 78.9 L 79.9,219 76.9,217 V 212 L 79.9,211 H 64.9 V 207 Z"
//                      stroke='black'
//                      fill="none"
//                      strokeWidth={1}/>
//               </G>
//           </AnimatedSvg>
